<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="didor">
<title>Tutoriel didor • didor</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Tutoriel didor">
<meta property="og:description" content="didor">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">didor</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.3.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/premiers_pas.html">Premiers pas</a>
    <a class="dropdown-item" href="../articles/tutoriel_didor.html">Tutoriel didor</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Tutoriel didor</h1>
            
      
      
      <div class="d-none name"><code>tutoriel_didor.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="dido">DIDO<a class="anchor" aria-label="anchor" href="#dido"></a>
</h2>
<ul>
<li>Un catalogue à disposition du public, utilisable avec {didor}</li>
<li>Un système d’alimentation du catalogue pour les agents qui
alimentent régulièrement DIDO</li>
</ul>
<div class="section level3">
<h3 id="catalogue">Catalogue<a class="anchor" aria-label="anchor" href="#catalogue"></a>
</h3>
<p>On trouve ici le catalogue DIDO : <a href="https://www.statistiques.developpement-durable.gouv.fr/catalogue?page=explore&amp;type=dataset&amp;pagination=1&amp;sortField=last_modified&amp;sortOrder=desc" class="external-link uri">https://www.statistiques.developpement-durable.gouv.fr/catalogue?page=explore&amp;type=dataset&amp;pagination=1&amp;sortField=last_modified&amp;sortOrder=desc</a></p>
</div>
<div class="section level3">
<h3 id="des-jeux-de-données-et-des-fichiers-de-données">Des jeux de données et des fichiers de données<a class="anchor" aria-label="anchor" href="#des-jeux-de-donn%C3%A9es-et-des-fichiers-de-donn%C3%A9es"></a>
</h3>
<p>DIDO propose aujourd’hui (23/02/2023) Une vingtaine de jeux de
données (dataset) et environ 120 fichiers de données (datafile).</p>
<p>1 ou plusieurs fichiers de données sont inclus dans un jeu de
données. Chaque jeu de données contient des fichiers d’annexes.</p>
<p>La logique est donc la suivante : on explore DIDO en commençant par
chercher le dataset qui nous intéresse, puis on trouve la donnée en
explorant les datafiles avec l’aide des annexes. Ces annexes commentent
et précisent la nature des informations contenues dans les datafiles qui
constituent un ensemble logique d’informations : le dataset exploré.</p>
</div>
<div class="section level3">
<h3 id="que-lon-peut-aussi-explorer-directement-avec-r-didor">Que l’on peut aussi explorer directement avec R {didor}<a class="anchor" aria-label="anchor" href="#que-lon-peut-aussi-explorer-directement-avec-r-didor"></a>
</h3>
<p>{didor} est un package R <a href="https://github.com/MTES-MCT/didor" class="external-link uri">https://github.com/MTES-MCT/didor</a><br>
qui propose une documentation de prise en main :<br><a href="https://mtes-mct.github.io/didor/articles/premiers_pas.html" class="uri">https://mtes-mct.github.io/didor/articles/premiers_pas.html</a></p>
</div>
</div>
<div class="section level2">
<h2 id="explorons">Explorons<a class="anchor" aria-label="anchor" href="#explorons"></a>
</h2>
<p>Il va nous falloir des fonctions du tidyverse</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.1     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.4</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.0</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.4.1     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.2.1</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.2     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.0</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.1     </span></span>
<span><span class="co">## ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span></code></pre>
<div class="section level3">
<h3 id="je-voudrais-la-liste-des-jeux-de-données-proposés">je voudrais la liste des jeux de données proposés<a class="anchor" aria-label="anchor" href="#je-voudrais-la-liste-des-jeux-de-donn%C3%A9es-propos%C3%A9s"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl_dataset</span> <span class="op">&lt;-</span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tbl_dataset</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"title"</span>,<span class="st">"spatial_granularity"</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, format<span class="op">=</span><span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
spatial_granularity
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Données locales de consommation d’électricité et de gaz naturel et de
chaleur et de froid - adresse (à partir de 2018)
</td>
<td style="text-align:left;">
poi
</td>
</tr>
<tr>
<td style="text-align:left;">
Données locales de consommation d’électricité et de gaz naturel - région
(à partir de 2018)
</td>
<td style="text-align:left;">
fr:region
</td>
</tr>
<tr>
<td style="text-align:left;">
Conjoncture mensuelle de l’énergie
</td>
<td style="text-align:left;">
country
</td>
</tr>
<tr>
<td style="text-align:left;">
Données nationales sur la commercialisation des logements neufs
</td>
<td style="text-align:left;">
country
</td>
</tr>
<tr>
<td style="text-align:left;">
Données régionales sur la commercialisation des logements neufs
</td>
<td style="text-align:left;">
fr:region
</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="je-voudrais-la-liste-des-fichiers-de-données-proposés">je voudrais la liste des fichiers de données proposés<a class="anchor" aria-label="anchor" href="#je-voudrais-la-liste-des-fichiers-de-donn%C3%A9es-propos%C3%A9s"></a>
</h3>
<p>Disons que je m’interesse à ce jeu de donnée :<br>
Indicateurs territoriaux de développement durable (ITDD)</p>
<p>J’ai envie d’écrire cela :</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl_datafile_itdd</span> <span class="op">&lt;-</span> <span class="va">tbl_dataset</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datafiles.html">datafiles</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tbl_datafile_itdd</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"title"</span>,<span class="st">"description"</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, format<span class="op">=</span><span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
Données de consommation et de points de livraison d’énergie à la maille
adresse - électricité - année 2018
</td>
<td style="text-align:left;">
Consommations d’électricité et points de livraison, par secteur
d’activité (agriculture, industrie, tertiaire, résidentiel et non
affecté), à la maille géographique adresse
</td>
</tr>
<tr>
<td style="text-align:left;">
Données de consommation et de points de livraison d’énergie à la maille
adresse - électricité - année 2019
</td>
<td style="text-align:left;">
Consommations d’électricité et points de livraison, par secteur
d’activité (agriculture, industrie, tertiaire, résidentiel et non
affecté), à la maille géographique adresse
</td>
</tr>
<tr>
<td style="text-align:left;">
Données de consommation et de points de livraison d’énergie à la maille
adresse - électricité - année 2020
</td>
<td style="text-align:left;">
Consommations annuelles et nombre de points de livraison d’électricité
des bâtiments professionnels par secteur d’activité (agriculture,
industrie, tertiaire et non affecté) et de ceux du secteur résidentiel
d’au moins 10 logements à la maille adresse
</td>
</tr>
<tr>
<td style="text-align:left;">
Données de consommation et de points de livraison d’énergie à la maille
adresse - électricité - année 2021
</td>
<td style="text-align:left;">
Consommations annuelles et nombre de points de livraison d’électricité
des bâtiments professionnels par secteur d’activité (agriculture,
industrie, tertiaire, résidentiel et non affecté) ou selon le code NAF à
2 niveaux selon les cas et de ceux du secteur résidentiel d’au moins 10
logements à la maille adresse
</td>
</tr>
<tr>
<td style="text-align:left;">
Données de consommation et de points de livraison d’énergie à la maille
adresse - gaz naturel - année 2018
</td>
<td style="text-align:left;">
Consommations annuelles et nombre de points de livraison de gaz naturel
des bâtiments professionnels par secteur d’activité (agriculture,
industrie, tertiaire et non affecté) et de ceux du secteur résidentiel
d’au moins 10 logements ou de plus de 200 MWh à la maille adresse
</td>
</tr>
</tbody>
</table>
<hr>
<p>Trop de résultats au milieu de tous les fichiers de données ! Les
infos des fichiers de données ne permettent pas de filtrer sur les jeux
de données auxquels ils appartiennent.</p>
<p>Il faut donc d’abord sélectionner le jeu de données qui nous
intéresse :</p>
<p>brutalement par exemple :</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl_dataset</span> <span class="op">&lt;-</span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">title</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Indicateurs territoriaux de développement durable (ITDD)"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tbl_dataset</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"title"</span>,<span class="st">"spatial_granularity"</span><span class="op">)</span><span class="op">]</span>, format<span class="op">=</span><span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
spatial_granularity
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:left;">
Indicateurs territoriaux de développement durable (ITDD)
</td>
<td style="text-align:left;">
fr:commune
</td>
</tr></tbody>
</table>
<hr>
<p>ou avec la fonction dido_search :</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl_dataset</span> <span class="op">&lt;-</span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"ITDD"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tbl_dataset</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"title"</span>,<span class="st">"spatial_granularity"</span><span class="op">)</span><span class="op">]</span>, format<span class="op">=</span><span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
spatial_granularity
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:left;">
Indicateurs territoriaux de développement durable (ITDD)
</td>
<td style="text-align:left;">
fr:commune
</td>
</tr></tbody>
</table>
<hr>
<p>Peu importe le moyen, on peut maintenant chercher les fichiers
contenus dans le jeu de données :</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl_datafile_itdd</span> <span class="op">&lt;-</span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"ITDD"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datafiles.html">datafiles</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tbl_datafile_itdd</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"title"</span>,<span class="st">"description"</span><span class="op">)</span><span class="op">]</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span>, format<span class="op">=</span><span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
description
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
1.01 ITDD - France entière
</td>
<td style="text-align:left;">
Les données des indicateurs territoriaux correspondant aux 17 objectifs
de développement durable. Couverture : France entière Granularité :
nationale
</td>
</tr>
<tr>
<td style="text-align:left;">
1.02 ITDD - France hors Mayotte
</td>
<td style="text-align:left;">
Les données des indicateurs territoriaux correspondant aux 17 objectifs
de développement durable. Couverture : France hors Mayotte Granularité :
nationale
</td>
</tr>
<tr>
<td style="text-align:left;">
1.03 ITDD - France métropolitaine
</td>
<td style="text-align:left;">
Les données des indicateurs territoriaux correspondant aux 17 objectifs
de développement durable. Couverture : France métropolitaine Granularité
: nationale
</td>
</tr>
<tr>
<td style="text-align:left;">
2.01 ITDD - Province de France métropolitaine
</td>
<td style="text-align:left;">
Les données des indicateurs territoriaux correspondant aux 17 objectifs
de développement durable. Couverture : Province de France métropolitaine
Granularité : province
</td>
</tr>
<tr>
<td style="text-align:left;">
3.01 ITDD - Toutes régions
</td>
<td style="text-align:left;">
Les données des indicateurs territoriaux correspondant aux 17 objectifs
de développement durable. Couverture : France entière Granularité :
régions Code Officiel Géographique INSEE (N-1 du millésime)
</td>
</tr>
</tbody>
</table>
<hr>
<p>Même ainsi, il y a du choix !</p>
</div>
<div class="section level3">
<h3 id="je-voudrais-un-fichier-de-données-dans-un-dataframe">je voudrais un fichier de données dans un dataframe<a class="anchor" aria-label="anchor" href="#je-voudrais-un-fichier-de-donn%C3%A9es-dans-un-dataframe"></a>
</h3>
<p>Donc on en sélectionne un :</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl_datafile_itdd</span> <span class="op">&lt;-</span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"ITDD"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datafiles.html">datafiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"Bourgogne-Franche-Comté"</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tbl_datafile_itdd</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"title"</span>,<span class="st">"description"</span><span class="op">)</span><span class="op">]</span>, format<span class="op">=</span><span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
title
</th>
<th style="text-align:left;">
description
</th>
</tr></thead>
<tbody><tr>
<td style="text-align:left;">
5.08 ITDD - Bourgogne-Franche-Comté - Toutes les communes
</td>
<td style="text-align:left;">
Les données des indicateurs territoriaux correspondant aux 17 objectifs
de développement durable. Couverture : région Bourgogne-Franche-Comté
Granularité : communes Code Officiel Géographique INSEE (N-1 du
millésime)
</td>
</tr></tbody>
</table>
<hr>
<p>Et on le récupère : on le met dans un tibble.</p>
<p>C’est quoi un tibble ?<br><a href="https://tibble.tidyverse.org/" class="external-link uri">https://tibble.tidyverse.org/</a></p>
<p>Il est donc chargé en <strong>mémoire</strong> dans R.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl_datafile_itdd</span> <span class="op">&lt;-</span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"ITDD"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datafiles.html">datafiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"Bourgogne-Franche-Comté"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="st">"CODGEO_CODE,CODGEO_LIBELLE,A2019,A2018,A2017"</span>,</span>
<span>    <span class="co"># NO_INDIC ="eq:i021",</span></span>
<span>    VARIABLE <span class="op">=</span> <span class="st">"eq:ESO_PES_NB_TOT_CLAS4"</span>,</span>
<span>    NO_INDIC <span class="op">=</span><span class="st">"eq:i034b"</span></span>
<span>  <span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> downloading data and caching to : /tmp/RtmpTvUDDK/eb8b9bd5-8e50-4007-a869-948781aadeb3-2023-01-columns=CODGEO_CODE,CODGEO_LIBELLE,A2019,A2018,A2017;VARIABLE=eqESO_PES_NB_TOT_CLAS4;NO_INDIC=eqi034b.csv</span></span></code></pre>
<pre><code>## 
Downloading: 10 B     
Downloading: 10 B     
Downloading: 3.2 kB     
Downloading: 3.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 11 kB     
Downloading: 11 kB     
Downloading: 12 kB     
Downloading: 12 kB     
Downloading: 12 kB     
Downloading: 12 kB     
Downloading: 12 kB     
Downloading: 12 kB     
Downloading: 20 kB     
Downloading: 20 kB     
Downloading: 20 kB     
Downloading: 20 kB     
Downloading: 20 kB     
Downloading: 20 kB     
Downloading: 21 kB     
Downloading: 21 kB     
Downloading: 21 kB     
Downloading: 21 kB     
Downloading: 25 kB     
Downloading: 25 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 30 kB     
Downloading: 30 kB     
Downloading: 31 kB     
Downloading: 31 kB     
Downloading: 31 kB     
Downloading: 31 kB     
Downloading: 31 kB     
Downloading: 31 kB</code></pre>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">tbl_datafile_itdd</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">30</span><span class="op">)</span> , format<span class="op">=</span><span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
CODGEO_CODE
</th>
<th style="text-align:left;">
CODGEO_LIBELLE
</th>
<th style="text-align:left;">
A2019
</th>
<th style="text-align:left;">
A2018
</th>
<th style="text-align:left;">
A2017
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
21001
</td>
<td style="text-align:left;">
Agencourt
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21002
</td>
<td style="text-align:left;">
Agey
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21003
</td>
<td style="text-align:left;">
Ahuy
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21004
</td>
<td style="text-align:left;">
Aignay-le-Duc
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21005
</td>
<td style="text-align:left;">
Aiserey
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21006
</td>
<td style="text-align:left;">
Aisey-sur-Seine
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21007
</td>
<td style="text-align:left;">
Aisy-sous-Thil
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21008
</td>
<td style="text-align:left;">
Alise-Sainte-Reine
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21009
</td>
<td style="text-align:left;">
Allerey
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21010
</td>
<td style="text-align:left;">
Aloxe-Corton
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21011
</td>
<td style="text-align:left;">
Ampilly-les-Bordes
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21012
</td>
<td style="text-align:left;">
Ampilly-le-Sec
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21013
</td>
<td style="text-align:left;">
Ancey
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21014
</td>
<td style="text-align:left;">
Antheuil
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21015
</td>
<td style="text-align:left;">
Antigny-la-Ville
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21016
</td>
<td style="text-align:left;">
Arceau
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21017
</td>
<td style="text-align:left;">
Arcenant
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21018
</td>
<td style="text-align:left;">
Arcey
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21020
</td>
<td style="text-align:left;">
Arconcey
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21021
</td>
<td style="text-align:left;">
Arc-sur-Tille
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21022
</td>
<td style="text-align:left;">
Argilly
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21023
</td>
<td style="text-align:left;">
Arnay-le-Duc
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21024
</td>
<td style="text-align:left;">
Arnay-sous-Vitteaux
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21025
</td>
<td style="text-align:left;">
Arrans
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21026
</td>
<td style="text-align:left;">
Asnières-en-Montagne
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21027
</td>
<td style="text-align:left;">
Asnières-lès-Dijon
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21028
</td>
<td style="text-align:left;">
Athée
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21029
</td>
<td style="text-align:left;">
Athie
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21030
</td>
<td style="text-align:left;">
Aubaine
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
<tr>
<td style="text-align:left;">
21031
</td>
<td style="text-align:left;">
Aubigny-en-Plaine
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:left;">
0
</td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="section level3">
<h3 id="mais-quest-ce-que-cest-que-ces-paramètres-dans-get_data">Mais qu’est ce que c’est que ces paramètres dans get_data ?<a class="anchor" aria-label="anchor" href="#mais-quest-ce-que-cest-que-ces-param%C3%A8tres-dans-get_data"></a>
</h3>
<p>{didor} ne fait rien d’autre que proposer les mêmes outils que ceux
dont on dispose dans le catalogue :</p>
<ul>
<li>selectionner des colonnes</li>
<li>filtrer les lignes selon un critère sur une variable ou
plusieurs</li>
</ul>
<div class="section level4">
<h4 id="paramètres">paramètres<a class="anchor" aria-label="anchor" href="#param%C3%A8tres"></a>
</h4>
<p>didor::get_data() peut prendre un paramètre query et ce n’est qu’une
requête écrite et passée à l’API.</p>
<p>On trouve donc des informations qui permettent de s’y retrouver dans
la <a href="https://www.statistiques.developpement-durable.gouv.fr/catalogue?page=datafile&amp;datafileRid=eb8b9bd5-8e50-4007-a869-948781aadeb3" class="external-link">documentation
de l’API du fichier de données</a> :</p>
<hr>
</div>
<div class="section level4">
<h4 id="les-annexes">Les annexes<a class="anchor" aria-label="anchor" href="#les-annexes"></a>
</h4>
<p>Dans l’onglets métadonnées du fichier de données ou après les
fichiers de données, dans le jeu de données.<br>
On peut les consulter en ligne ou directement les récupérer via
didor::attachments()</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="va">tbl_attachment</span> <span class="op">&lt;-</span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"ITDD"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/attachments.html">attachments</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"6.01"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/get_attachments.html">get_attachments</a></span><span class="op">(</span>dest <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## file downloaded: /tmp/RtmpTvUDDK/dictionnaire-indicateurs-territoriaux-developpement-durable.xlsx</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="typage">typage<a class="anchor" aria-label="anchor" href="#typage"></a>
</h4>
<p><strong>Les données sont toutes en chr</strong> : pour les manipuler
ce n’est pas forcément pratique. C’est néanmoins nécessaire,
<strong>pourquoi</strong> ?</p>
<p>Dans un datafile, une variable (colonne) numérique contient une
valeur qui peut être manquante. Le producteur de la donnée peut, s’il le
souhaite, préciser la raison de l’absence. “secret” indiquera que la
valeur sous secret statistique</p>
<p>Donc dans DIDO, (numérique) est équivalent à (type numérique de R
union “secret”) Bref, en utilisant la fonction convert(), on supprime
tout cela et on peut effectuer des opérations mathématiques.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">tbl_datafile_itdd</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## tibble [3,700 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  $ CODGEO_CODE   : chr [1:3700] "21001" "21002" "21003" "21004" ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "CODGEO_CODE"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "COG_COMMUNE - Code de la zone"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "string"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi FALSE</span></span>
<span><span class="co">##  $ CODGEO_LIBELLE: chr [1:3700] "Agencourt" "Agey" "Ahuy" "Aignay-le-Duc" ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "CODGEO_LIBELLE"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "COG_COMMUNE - Libellé de la zone"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "string"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi FALSE</span></span>
<span><span class="co">##  $ A2019         : chr [1:3700] "0" "0" "0" "0" ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "A2019"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "A2019"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "number"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi FALSE</span></span>
<span><span class="co">##  $ A2018         : chr [1:3700] "0" "0" "0" "0" ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "A2018"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "A2018"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "number"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi FALSE</span></span>
<span><span class="co">##  $ A2017         : chr [1:3700] "0" "0" "0" "0" ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "A2017"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "A2017"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "number"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi FALSE</span></span></code></pre>
<p>Il suffit de les convertir avec la fonction convert()</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">tbl_datafile_itdd</span> <span class="op">&lt;-</span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"ITDD"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datafiles.html">datafiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"Bourgogne-Franche-Comté"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="st">"CODGEO_CODE,CODGEO_LIBELLE,A2019,A2018,A2017"</span>,</span>
<span>    <span class="co"># NO_INDIC ="eq:i021",</span></span>
<span>    VARIABLE <span class="op">=</span> <span class="st">"eq:ESO_PES_NB_TOT_CLAS4"</span>,</span>
<span>    NO_INDIC <span class="op">=</span><span class="st">"eq:i034b"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/convert.html">convert</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> reading data from cache : /tmp/RtmpTvUDDK/eb8b9bd5-8e50-4007-a869-948781aadeb3-2023-01-columns=CODGEO_CODE,CODGEO_LIBELLE,A2019,A2018,A2017;VARIABLE=eqESO_PES_NB_TOT_CLAS4;NO_INDIC=eqi034b.csv</span></span></code></pre>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">tbl_datafile_itdd</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## tibble [3,700 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">##  $ CODGEO_CODE   : chr [1:3700] "21001" "21002" "21003" "21004" ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "CODGEO_CODE"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "COG_COMMUNE - Code de la zone"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "string"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi FALSE</span></span>
<span><span class="co">##  $ CODGEO_LIBELLE: chr [1:3700] "Agencourt" "Agey" "Ahuy" "Aignay-le-Duc" ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "CODGEO_LIBELLE"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "COG_COMMUNE - Libellé de la zone"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "string"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi FALSE</span></span>
<span><span class="co">##  $ A2019         : num [1:3700] 0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "A2019"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "A2019"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "number"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi TRUE</span></span>
<span><span class="co">##  $ A2018         : num [1:3700] 0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "A2018"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "A2018"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "number"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi TRUE</span></span>
<span><span class="co">##  $ A2017         : num [1:3700] 0 0 0 0 0 0 0 0 0 0 ...</span></span>
<span><span class="co">##   ..- attr(*, "name")= chr "A2017"</span></span>
<span><span class="co">##   ..- attr(*, "description")= chr "A2017"</span></span>
<span><span class="co">##   ..- attr(*, "unit")= chr "n/a"</span></span>
<span><span class="co">##   ..- attr(*, "type")= chr "number"</span></span>
<span><span class="co">##   ..- attr(*, "converted")= logi TRUE</span></span></code></pre>
</div>
<div class="section level4">
<h4 id="cherchons-une-correlation">Cherchons une correlation<a class="anchor" aria-label="anchor" href="#cherchons-une-correlation"></a>
</h4>
<p>Par exemple, entre la participation au présidentielles 2022 et le
taux de 20/24 ans sortis non diplomés</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"ITDD"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/datafiles.html">datafiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">"Bourgogne-Franche-Comté"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span>query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    columns <span class="op">=</span> <span class="st">"VARIABLE,CODGEO_CODE,CODGEO_LIBELLE,A2022,A2019,A2017,A2013,A2012,A2007,A2002"</span>,</span>
<span>    <span class="co"># NO_INDIC ="eq:i021",</span></span>
<span>    <span class="co"># VARIABLE = "eq:taux_participation"</span></span>
<span>    VARIABLE <span class="op">=</span> <span class="st">"in:part_20_24_sortis_nondip,taux_participation"</span></span>
<span>    <span class="co">#NO_INDIC ="eq:i110"</span></span>
<span>  <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">didor</span><span class="fu">::</span><span class="fu"><a href="../reference/convert.html">convert</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">CODGEO_CODE</span>,<span class="va">A2022</span>,<span class="va">A2019</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">CODGEO_CODE</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise_all.html" class="external-link">summarise_at</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A2022"</span>,<span class="st">"A2019"</span><span class="op">)</span>,<span class="va">sum</span>,na.rm<span class="op">=</span><span class="cn">T</span><span class="op">)</span> </span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> downloading data and caching to : /tmp/RtmpTvUDDK/eb8b9bd5-8e50-4007-a869-948781aadeb3-2023-01-columns=VARIABLE,CODGEO_CODE,CODGEO_LIBELLE,A2022,A2019,A2017,A2013,A2012,A2007,A2002;VARIABLE=inpart_20_24_sortis_nondip,taux_participation.csv</span></span></code></pre>
<pre><code>## 
Downloading: 10 B     
Downloading: 10 B     
Downloading: 7 kB     
Downloading: 7 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 8.2 kB     
Downloading: 15 kB     
Downloading: 15 kB     
Downloading: 16 kB     
Downloading: 16 kB     
Downloading: 16 kB     
Downloading: 16 kB     
Downloading: 16 kB     
Downloading: 16 kB     
Downloading: 23 kB     
Downloading: 23 kB     
Downloading: 25 kB     
Downloading: 25 kB     
Downloading: 25 kB     
Downloading: 25 kB     
Downloading: 25 kB     
Downloading: 25 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 28 kB     
Downloading: 31 kB     
Downloading: 31 kB     
Downloading: 31 kB     
Downloading: 31 kB     
Downloading: 33 kB     
Downloading: 33 kB     
Downloading: 36 kB     
Downloading: 36 kB     
Downloading: 36 kB     
Downloading: 36 kB     
Downloading: 37 kB     
Downloading: 37 kB     
Downloading: 37 kB     
Downloading: 37 kB     
Downloading: 37 kB     
Downloading: 37 kB     
Downloading: 45 kB     
Downloading: 45 kB     
Downloading: 45 kB     
Downloading: 45 kB     
Downloading: 45 kB     
Downloading: 45 kB     
Downloading: 45 kB     
Downloading: 45 kB     
Downloading: 49 kB     
Downloading: 49 kB     
Downloading: 49 kB     
Downloading: 49 kB     
Downloading: 49 kB     
Downloading: 49 kB     
Downloading: 53 kB     
Downloading: 53 kB     
Downloading: 57 kB     
Downloading: 57 kB     
Downloading: 57 kB     
Downloading: 57 kB     
Downloading: 57 kB     
Downloading: 57 kB     
Downloading: 65 kB     
Downloading: 65 kB     
Downloading: 65 kB     
Downloading: 65 kB     
Downloading: 65 kB     
Downloading: 65 kB     
Downloading: 65 kB     
Downloading: 65 kB     
Downloading: 66 kB     
Downloading: 66 kB     
Downloading: 73 kB     
Downloading: 73 kB     
Downloading: 74 kB     
Downloading: 74 kB     
Downloading: 74 kB     
Downloading: 74 kB     
Downloading: 74 kB     
Downloading: 74 kB     
Downloading: 81 kB     
Downloading: 81 kB     
Downloading: 82 kB     
Downloading: 82 kB     
Downloading: 82 kB     
Downloading: 82 kB     
Downloading: 82 kB     
Downloading: 82 kB     
Downloading: 85 kB     
Downloading: 85 kB     
Downloading: 85 kB     
Downloading: 85 kB     
Downloading: 85 kB     
Downloading: 85 kB     
Downloading: 85 kB     
Downloading: 85 kB     
Downloading: 88 kB     
Downloading: 88 kB     
Downloading: 88 kB     
Downloading: 88 kB     
Downloading: 88 kB     
Downloading: 88 kB     
Downloading: 96 kB     
Downloading: 96 kB     
Downloading: 96 kB     
Downloading: 96 kB     
Downloading: 96 kB     
Downloading: 96 kB     
Downloading: 96 kB     
Downloading: 96 kB     
Downloading: 98 kB     
Downloading: 98 kB     
Downloading: 100 kB     
Downloading: 100 kB     
Downloading: 100 kB     
Downloading: 100 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 110 kB     
Downloading: 120 kB     
Downloading: 120 kB     
Downloading: 120 kB     
Downloading: 120 kB     
Downloading: 120 kB     
Downloading: 120 kB     
Downloading: 120 kB     
Downloading: 120 kB     
Downloading: 130 kB     
Downloading: 130 kB     
Downloading: 130 kB     
Downloading: 130 kB     
Downloading: 130 kB     
Downloading: 130 kB     
Downloading: 130 kB     
Downloading: 130 kB</code></pre>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">result</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="fl">5</span><span class="op">)</span> , format<span class="op">=</span><span class="st">"html"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr>
<th style="text-align:left;">
CODGEO_CODE
</th>
<th style="text-align:right;">
A2022
</th>
<th style="text-align:right;">
A2019
</th>
</tr></thead>
<tbody>
<tr>
<td style="text-align:left;">
21001
</td>
<td style="text-align:right;">
77.71
</td>
<td style="text-align:right;">
33.65
</td>
</tr>
<tr>
<td style="text-align:left;">
21002
</td>
<td style="text-align:right;">
80.74
</td>
<td style="text-align:right;">
33.33
</td>
</tr>
<tr>
<td style="text-align:left;">
21003
</td>
<td style="text-align:right;">
81.13
</td>
<td style="text-align:right;">
16.95
</td>
</tr>
<tr>
<td style="text-align:left;">
21004
</td>
<td style="text-align:right;">
74.58
</td>
<td style="text-align:right;">
23.08
</td>
</tr>
<tr>
<td style="text-align:left;">
21005
</td>
<td style="text-align:right;">
81.55
</td>
<td style="text-align:right;">
8.20
</td>
</tr>
</tbody>
</table>
<p>En en faisant un nuage de points :</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">result</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">A2022</span>, y<span class="op">=</span><span class="va">A2019</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="tutoriel_didor_files/figure-html/nuage-1.png" width="700"></p>
</div>
<div class="section level4">
<h4 id="eco-considérations">eco-considérations<a class="anchor" aria-label="anchor" href="#eco-consid%C3%A9rations"></a>
</h4>
<p>Les données sont récupérées, et transitent donc sur le réseau
lorsqu’on fait un <code><a href="../reference/get_data.html">get_data()</a></code> et les paramètres de la
‘query’ du <code><a href="../reference/get_data.html">get_data()</a></code> filtrent et sélectionnent les données
qui sont transférées.</p>
<p>Le filtrage/sélection s’effectue dans DiDo.</p>
<p>Si on avait tout récupéré sans filtrer/sélectionner on aurait envoyé
environ 20 millions de lignes et un bon paquet de colonnes au travers du
réseau, ça aurait pris du temps… probablement planté… et consommé plein
de ressources inutiles…</p>
<p>Bref, filtrer/sélectionner au plus près de DIDO, c’est mieux !</p>
</div>
<div class="section level4">
<h4 id="on-peut-faire-du-shiny-avec-didor">On peut faire du {shiny} avec {didor}<a class="anchor" aria-label="anchor" href="#on-peut-faire-du-shiny-avec-didor"></a>
</h4>
<p>On peut utiliser {didor} dans une appli {shiny} un exemple avec les
données NAMEA d’emission de GES</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">didor</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org" class="external-link">stringr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">code_nace</span> <span class="op">&lt;-</span>   <span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">'NAMEA'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/datafiles.html">datafiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span></span>
<span>    query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>columns <span class="op">=</span> <span class="st">"CODE_NACE_REV2_ET_MENAGES,LIBELLE_NACE_ET_MENAGES"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="fu">shinyApp</span><span class="op">(</span></span>
<span></span>
<span><span class="co"># Define UI for application that draws a histogram</span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu">fillPage</span><span class="op">(</span></span>
<span>  <span class="va">tags</span><span class="op">$</span><span class="fu">style</span><span class="op">(</span><span class="fu">HTML</span><span class="op">(</span><span class="st">'</span></span>
<span><span class="st">    body {</span></span>
<span><span class="st">        font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;</span></span>
<span><span class="st">        font-size: 7px;</span></span>
<span><span class="st">        line-height: 1.42857143;</span></span>
<span><span class="st">        color: #333;</span></span>
<span><span class="st">        background-color: #fff;</span></span>
<span><span class="st">    }</span></span>
<span><span class="st">    '</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="co"># Application title</span></span>
<span>    <span class="fu">titlePanel</span><span class="op">(</span><span class="st">"{didor}+{shiny}"</span><span class="op">)</span>,</span>
<span></span>
<span>    <span class="co"># Sidebar with a slider input for number of bins </span></span>
<span>    <span class="fu">sidebarLayout</span><span class="op">(</span></span>
<span>      <span class="fu">sidebarPanel</span><span class="op">(</span></span>
<span>        <span class="fu">selectInput</span><span class="op">(</span></span>
<span>          inputId <span class="op">=</span> <span class="st">"nace"</span>,</span>
<span>          label <span class="op">=</span> <span class="st">"code nace"</span>,</span>
<span>          choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">code_nace</span><span class="op">$</span><span class="va">LIBELLE_NACE_ET_MENAGES</span><span class="op">)</span></span>
<span>        <span class="op">)</span>,</span>
<span>        width<span class="op">=</span><span class="fl">2</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu">mainPanel</span><span class="op">(</span>  </span>
<span>        <span class="fu">tableOutput</span><span class="op">(</span><span class="st">"table"</span><span class="op">)</span>,</span>
<span>        width<span class="op">=</span><span class="fl">10</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">)</span>,</span>
<span></span>
<span><span class="co"># Define server logic required to draw a histogram</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span>  <span class="va">code_nace_select</span> <span class="op">&lt;-</span> <span class="fu">reactive</span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_c.html" class="external-link">str_c</a></span><span class="op">(</span></span>
<span>      <span class="st">"in:"</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span></span>
<span>        <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span></span>
<span>            <span class="va">code_nace</span></span>
<span>          <span class="op">)</span>,</span>
<span>          <span class="va">LIBELLE_NACE_ET_MENAGES</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">nace</span><span class="op">)</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>    </span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">reactive</span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="../reference/datasets.html">datasets</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/dido_search.html">dido_search</a></span><span class="op">(</span><span class="st">'NAMEA'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/datafiles.html">datafiles</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="../reference/get_data.html">get_data</a></span><span class="op">(</span></span>
<span>        query <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>SUBSTANCE<span class="op">=</span><span class="st">"in:GES"</span>,CODE_NACE_REV2_ET_MENAGES<span class="op">=</span><span class="fu">code_nace_select</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span> </span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">table</span> <span class="op">&lt;-</span> <span class="fu">renderTable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span>,</span>
<span></span>
<span>options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>width <span class="op">=</span> <span class="st">"100%"</span>,height <span class="op">=</span> <span class="fl">500</span><span class="op">)</span></span>
<span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Run the application </span></span>
<span><span class="fu">shinyApp</span><span class="op">(</span>ui <span class="op">=</span> <span class="va">ui</span>, server <span class="op">=</span> <span class="va">server</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="crédits">Crédits<a class="anchor" aria-label="anchor" href="#cr%C3%A9dits"></a>
</h4>
<p>Merci à Nicolas Chuche pour la construction de {didor} et merci à
vous de vos retours sur son utilisation : nous vous invitons à ouvrir
des issues dans github afin de nous permettre d’améliorer ce package :
<a href="https://github.com/MTES-MCT/didor/issues" class="external-link uri">https://github.com/MTES-MCT/didor/issues</a></p>
<p>(et merci à Olivier Chantrel pour ce tutoriel !)</p>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Nicolas Chuche.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
